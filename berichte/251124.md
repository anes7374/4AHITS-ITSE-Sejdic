# Arbeitsbericht: Port probing und scanning

* **Klasse:** 4AHITS  
* **Name:** Anes Sejdic  
* **Fach:** ITSE  
* **Datum:** 2025-24-11  
* **Aufgabe:** [Port probing und scanning](https://www.franzmatejka.at/htl/doc/ITSI_4/lab/04_portscan.html)

---

## Inhaltsverzeichnis

1. [Port Probing](#1-port-probing)  
2. [netcat Port Scan](#2-netcat-port-scan)  
3. [nmap Port Scan](#3-nmap-port-scan)  
4. [nmap Cheat Sheet](#4-nmap-cheat-sheet)

---

## 1. Port Probing
**IP Metasploitable: 192.168.8.51**

### 1.1 telnet

Verwende telnet um festzustellen ob ein SSH-Server auf Metasploitable läuft:

```bash
$ telnet 192.168.8.51 22      
Trying 192.168.8.51...
Connected to 192.168.8.51.
Escape character is '^]'.
SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1
Connection closed by foreign host.
```

### 1.2 Bezeichnung und Versionsnummer des Webservers herausfinden

#### 1.2.1 telnet
```bash
telnet 192.168.8.51 80
Trying 192.168.8.51...
Connected to 192.168.8.51.
Escape character is '^]'.
HEAD / HTTP/1.0

HTTP/1.1 200 OK
Date: Mon, 10 Nov 2025 12:32:58 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Connection: close
Content-Type: text/html
```

#### 1.2.2 nc (netcat)
```bash
$ nc 192.168.8.51 80 <<EOF
heredoc> HEAD / HTTP/1.0
heredoc> Host: 192.168.8.51
heredoc> 
heredoc> EOF

HTTP/1.1 200 OK
Date: Mon, 10 Nov 2025 12:41:44 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Connection: close
Content-Type: text/html
```

#### 1.2.3 curl
```bash
$ curl -I http://192.168.8.51/
HTTP/1.1 200 OK
Date: Mon, 10 Nov 2025 12:43:16 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Content-Type: text/html
```

---

### 1.3 Port Probing Cheat Sheet

#### 1.3.1 telnet

**Port testen:**
```bash
telnet <IP> 22
```

**HTTP-Banner abfragen:**
```bash
telnet <IP> 80
GET / HTTP/1.0

```

#### 1.3.2 nc (netcat)

**Port testen:**
```bash
nc -vz <IP> 22
```

**HTTP-Banner (Here-Document):**
```bash
nc <IP> 80 <<EOF
GET / HTTP/1.0

EOF
```

**Alternative:**
```bash
echo -e "GET / HTTP/1.0\n" | nc <IP> 80
```

#### 1.3.3 curl

**HTTP-Server identifizieren:**
```bash
curl -I http://<IP>
```

**Verbose für mehr Details:**
```bash
curl -v http://<IP>
```

**Nur Header anzeigen:**
```bash
curl -s -D - http://<IP> -o /dev/null
```

#### Typische Findings
- **SSH-Banner** → zeigt Version (z. B. `OpenSSH_4.7p1`)  
- **HTTP-Header** → zeigt Webserver + Version (z. B. `Apache/2.2.8 (Ubuntu)`)

---

## 2. netcat Port Scan

Ermittle mit Hilfe von netcat welche Ports zwischen 1 und 30 geöffnet sind:

```bash
$ nc -zv 192.168.8.51 1-30                       

192.168.8.51: inverse host lookup failed: Unknown host
(UNKNOWN) [192.168.8.51] 25 (smtp) open
(UNKNOWN) [192.168.8.51] 23 (telnet) open
(UNKNOWN) [192.168.8.51] 22 (ssh) open
(UNKNOWN) [192.168.8.51] 21 (ftp) open
```

**Gefundene Dienste:**

| Port | Dienst  | Beschreibung |
|------|---------|--------------|
| 21   | FTP     | Dateiübertragungsdienst, sehr alt und unsicher |
| 22   | SSH     | Remote-Login, veraltete OpenSSH-Version |
| 23   | Telnet  | Unverschlüsselter Fernzugriff |
| 25   | SMTP    | Mailserver ohne Verschlüsselung |

---

## 3. nmap Port Scan

### 3.1 Standard-Portscan

```bash
$ nmap 192.168.8.51       
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-24 06:23 EST
Nmap scan report for 192.168.8.51
Host is up (0.0019s latency).
Not shown: 978 closed tcp ports (reset)
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
3306/tcp open  mysql
5432/tcp open  postgresql
5900/tcp open  vnc
6000/tcp open  X11
6667/tcp open  irc
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 00:0C:29:7B:38:F0 (VMware)

Nmap done: 1 IP address (1 host up) scanned in 0.42 seconds
```

Metasploitable ist absichtlich verwundbar → viele Dienste sind offen und veraltet.

---

### 3.2 Alle Ports scannen (1–65535)

```bash
$ nmap -p- 192.168.8.51
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-24 06:38 EST
Nmap scan report for 192.168.8.51
Host is up (0.0018s latency).
Not shown: 65506 closed tcp ports (reset)
PORT      STATE SERVICE
21/tcp    open  ftp
22/tcp    open  ssh
23/tcp    open  telnet
25/tcp    open  smtp
80/tcp    open  http
111/tcp   open  rpcbind
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
512/tcp   open  exec
513/tcp   open  login
514/tcp   open  shell
1099/tcp  open  rmiregistry
1524/tcp  open  ingreslock
2049/tcp  open  nfs
2121/tcp  open  ccproxy-ftp
3306/tcp  open  mysql
3632/tcp  open  distccd
5432/tcp  open  postgresql
5900/tcp  open  vnc
6000/tcp  open  X11
6667/tcp  open  irc
6697/tcp  open  ircs-u
8009/tcp  open  ajp13
8180/tcp  open  unknown
8787/tcp  open  msgsrvr
41712/tcp open  unknown
44799/tcp open  unknown
56676/tcp open  unknown
58770/tcp open  unknown
MAC Address: 00:0C:29:7B:38:F0 (VMware)

Nmap done: 1 IP address (1 host up) scanned in 12.32 seconds
 ```

---

### 3.3 Ping-Scan überspringen

```bash
nmap -Pn 192.168.8.51
```

nmap scannt den Host auch dann, wenn Ping blockiert ist.

---

### 3.4 Service- und Versions-Erkennung

```bash
nmap -sV 192.168.8.51
```

Beispiel:

```
22/tcp open ssh    OpenSSH 4.7p1
80/tcp open http   Apache 2.2.8
3306/tcp open mysql MySQL 5.0.51a
```

---

### 3.5 OS-Erkennung

```bash
nmap -O 192.168.8.51
```

Bsp:
```bash
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
```

---

### 3.6 Aggressiver Scan

```bash
nmap -A 192.168.8.51
```

---

### 3.7 Timing-Optionen

```bash
nmap -T4 192.168.8.51
```

---

### 3.8 Ausgabe in Dateien

```bash
nmap -oN scan.txt 192.168.8.51
```

---

### 3.9 Option `--reason`

```bash
nmap --reason 192.168.8.51
```

---

### 3.10 Nur die N häufigsten Ports scannen

```bash
nmap --top-ports 100 192.168.8.51
```

---

### 3.12 Was ein Port Scan zeigt

- laufende Dienste  
- offene/geschlossene Ports  
- OS-Informationen  
- mögliche Schwachstellen  
- Firewall- oder Filterregeln  
- Angriffsoberfläche eines Systems  

---

## 4. nmap Cheat Sheet

```bash
nmap <IP>
nmap -p- <IP>
nmap -Pn <IP>
nmap -sV <IP>
nmap -O <IP>
nmap -A <IP>
nmap -T4 <IP>
nmap -oN scan.txt <IP>
nmap --top-ports <N> <IP>
nmap --reason <IP>
nmap -sC <IP>
nmap -sU <IP>
```